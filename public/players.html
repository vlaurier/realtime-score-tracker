<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Participants enregistrés</title>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <nav style="position:sticky;top:0;background:#f8f8f8;border-bottom:1px solid #ddd;padding:0.5rem 1rem;display:flex;gap:1rem;">
    <a href="/" title="Accueil" style="text-decoration:none;font-size:1.5rem;">🏠</a>
    <a href="/players.html" title="Participants" style="text-decoration:none;font-size:1.5rem;">👤</a>
  </nav>

  <h1>Participants enregistrés</h1>

  <form id="addPlayerForm">
    <input type="text" id="playerName" placeholder="Nom du participant" required />
    <button type="submit">Ajouter</button>
  </form>

  <ul id="playersList"></ul>

  <script>
    const socket = io();
    const form = document.getElementById('addPlayerForm');
    const input = document.getElementById('playerName');
    const list = document.getElementById('playersList');

    form.addEventListener('submit', e => {
      e.preventDefault();
      const name = input.value.trim();
      if (name) {
        socket.emit('add_player', name);
        input.value = '';
        input.focus();
      }
    });

    socket.on('players_updated', (players) => {
      list.innerHTML = '';
      players.forEach(name => {
        const li = document.createElement('li');
        li.textContent = name;
        list.appendChild(li);
      });
    });

    socket.emit('get_players');
  </script>
</body>
</html>
